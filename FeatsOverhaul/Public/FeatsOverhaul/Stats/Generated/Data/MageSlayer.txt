//  ===================================Mage Slayer: Break Concentration ===================================
// Effect is now an aura and make passive highlighted

new entry "MageSlayer_BreakConcentration"
type "PassiveData"
data "DisplayName" "hc25ffc82g723cgb631gc8e4ga40f25e9fd37;1"
data "Description" "h1c3c654ag6a00g2556g9dd4g04ecf65c7bc2;2"
data "DescriptionParams" "Distance(3)"
data "Icon" "PassiveFeature_MageSlayer_BreakConcentration"
data "Properties" "ToggledDefaultOn;IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(MAGESLAYER_AURA, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(MAGESLAYER_AURA)"

// New statuses to apply the Mage Slayer aura effect
new entry "MAGESLAYER_AURA"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "PassiveFeature_MageSlayer_BreakConcentration"
data "StackId" "MAGESLAYER_AURA"
data "StackPriority" "10"
data "AuraRadius" "3"
data "AuraStatuses" "TARGET:IF(Enemy()):ApplyStatus(MAGESLAYER_AURA_BUFF)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;IgnoreResting"
data "StatusGroups" "SG_RemoveOnRespec"

new entry "MAGESLAYER_AURA_BUFF"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "he6f81661g867fg4363g8668ge114ae8ee3a4;1"
data "Description" "ha557595dg817cg49d9g9629g17427e8aaa2e;1"
data "Icon" "GenericIcon_Intent_Debuff"
data "StackId" "MAGESLAYER_AURA_BUFF"
data "StackPriority" "5"
data "Boosts" "Disadvantage(Concentration)"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog"

// =================================== Mage Slayer: Saving Throw Advantage ===================================
// Now gives advantage on saving throws against all spells (previously melee range only) and also gives resistance to all damage from spells. Passive is now highlighted

new entry "MageSlayer_Advantage"
type "PassiveData"
data "DisplayName" "h2361564ag5a28gd2f7gc1e5gcd556cc8ac75;2"
data "Description" "h568c7c2dg2e3dgf8bag8c00g104a2e2415a2;1"
data "Icon" "PassiveFeature_MageSlayer_Advantage"
data "Boosts" "IF(IsSpell()):Advantage(AllSavingThrows);SpellResistance(Resistant)"
data "Properties" "Highlighted"

// =================================== Mage Slayer: Attack Caster ===================================
// Range of attack is extended to 3m if using a Reach weapon (previously always 2m).

new entry "Interrupt_MageSlayer"
type "InterruptData"
using "Interrupt_MageSlayer"
data "DisplayName" "h420e6d49gbb3eg3520g1292gf50ab0c4571a;1"
data "Description" "he317842dg113cgb40ege0c5gce655c004086;1"
// data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Source, context.Observer) and Enemy(context.Source, context.Observer) and IsSpell() and not Uninterruptible() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not AnyEntityIsItem()"
data "Conditions" "IsAbleToReact(context.Observer) and not Self(context.Source, context.Observer) and Enemy(context.Source, context.Observer) and IsSpell() and not Uninterruptible() and ((not DistanceToEntityGreaterThan(3, context.ObserverPosition, context.Source) and HasWeaponProperty(WeaponProperties.Reach, GetActiveWeapon(context.Observer))) or (not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not (HasWeaponProperty(WeaponProperties.Reach, GetActiveWeapon(context.Observer))))) and not AnyEntityIsItem()"


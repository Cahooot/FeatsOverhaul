// Add proficiency with all bows
new entry "CrossbowExpert_Proficiency"
type "PassiveData"
data "DisplayName" "h0fc5dad2g48b0ge272gba06gf0eba243c113;1"
data "Description" "hdf9b2568g4822g7844gb402g6dcddedf3e71;3"
data "DescriptionParams" "1"
data "Icon" "PassiveFeature_CrossbowExpert_BonusShot"
data "Properties" "IsHidden"
data "Boosts" "Proficiency(HandCrossbows);Proficiency(LightCrossbows);Proficiency(HeavyCrossbows);Proficiency(Longbows);Proficiency(Shortbows)"

// Remove close-range disadvantage for all bows
new entry "CrossbowExpert_PointBlank"
type "PassiveData"
data "DisplayName" "hcb7e445fg83c8g9612g06bagae1967394c39;1"
data "Description" "h1cd080f5gbef9g3945gc187g68b5f3c9d3f2;1"
data "DescriptionParams" "Distance(1.5)"
data "Icon" "PassiveFeature_CrossbowExpert_PointBlank"
data "Properties" "Highlighted"
data "Boosts" "IgnorePointBlankDisadvantage(Ammunition)"

// Increase save DC of bow weapon actions
new entry "CrossbowExpert_Wounding"
type "PassiveData"
data "DisplayName" "h48bfcf7eg2988gf03bgefd6g6293758c31fa;2"
data "Description" "h605c8779gc582gadffg6e7fg720a537b76bf;4"
data "Icon" "PassiveFeature_CrossbowExpert_WoundingAim"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_PiercingShot'), ModifyTooltipDescription());UnlockSpellVariant(SpellId('Projectile_HamstringShot'), ModifyTooltipDescription())"

new entry "Projectile_HamstringShot"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_HamstringShot"
data "SpellSuccess" "IF(Character() and not HasPassive('CrossbowExpert_Wounding',context.Source) and not SavingThrow(Ability.Constitution, ManeuverSaveDC()+2)):ApplyStatus(HAMSTRING,100,2);IF(Character() and HasPassive('CrossbowExpert_Wounding',context.Source) and not SavingThrow(Ability.Constitution, ManeuverSaveDC()+4)):ApplyStatus(HAMSTRING,100,4);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType);ExecuteWeaponFunctors(MainHand)"

new entry "Projectile_PiercingShot"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_PiercingShot"
data "SpellSuccess" "IF(Character() and not HasPassive('CrossbowExpert_Wounding',context.Source) and not SavingThrow(Ability.Constitution, ManeuverSaveDC()+2)):ApplyStatus(GAPING_WOUND,100,2);IF(Character() and HasPassive('CrossbowExpert_Wounding',context.Source) and not SavingThrow(Ability.Constitution, ManeuverSaveDC()+4)):ApplyStatus(GAPING_WOUND,100,4);DealDamage(MainRangedWeapon, MainRangedWeaponDamageType);ExecuteWeaponFunctors(MainHand);"

// Separate hidden passive for +1 Dexterity because it doesn't show it on the feat selection screen otherwise for some reason
new entry "BowExpert_Dexterity"
type "PassiveData"
data "Boosts" "Ability(Dexterity,1)"

